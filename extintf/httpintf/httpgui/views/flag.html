{{define "main"}}
    <div class="content">
        <h2 class="content-head is-center">{{ .Flag.Name }}</h2>
        <div class="pure-g">
            <div class="l-box-lrg pure-u pure-u-1">
                <form action="/edit" method="post" class="pure-form pure-form-aligned">
                    <fieldset>

                        <div class="pure-control-group">
                            <label for="percentage">Rollout Percentage</label>
                            <input id="percentage"
                                   name="flag.rollout.strategy.percentage"
                                   type="range" min="0" max="100"
                                   value="{{ .Flag.Rollout.Strategy.Percentage }}">
                        </div>

                        <div class="pure-control-group">
                            <label for="seed">Seed of the random pseudo random in the rollout</label>
                            <input id="seed"
                                   name="flag.rollout.randSeedSalt"
                                   type="number"
                                   value="{{ .Flag.Rollout.RandSeedSalt }}">
                            {{/*<span class="pure-form-message-inline"></span>*/}}
                        </div>

                        <div class="pure-control-group">
                            <label for="decisionApiURL">Decision API URL</label>
                            <input id="decisionApiURL"
                                   name="flag.rollout.strategy.decisionLogicApi"
                                   type="url"
                                   {{ if .Flag.Rollout.Strategy.DecisionLogicAPI }}value="{{ .Flag.Rollout.Strategy.DecisionLogicAPI }}"{{end}}
                                   placeholder="this flag's custom decision logic API URL (optional)">
                        </div>

                        <input name="flag.name" type="hidden" value="{{ .Flag.Name }}">
                        <input name="flag.id" type="hidden" value="{{ .Flag.ID }}">
                        <button type="submit" class="pure-button pure-button-primary">Update</button>

                    </fieldset>
                </form>
            </div>

        </div>
    </div>

    <div class="content">
        {{ range .Pilots }}
            <form class="pure-form">
                <fieldset>

                    <input name="pilot.id" type="hidden" value="{{ .ID }}">
                    <input name="pilot.extID" type="text" value="{{ .ExternalID }}">
                    <input name="pilot.flagID" type="text" value="{{ .FeatureFlagID }}">

                    <label for="enrollment.{{ .ID }}">
                        <input name="pilot.enrolled"
                               id="enrollment.{{ .ID }}"
                               type="checkbox"
                               {{ if .Enrolled }}checked="checked"{{end}}> Enrolled
                    </label>

                    <button type="submit" class="pure-button pure-button-primary">update</button>

                </fieldset>
            </form>
        {{ end }}
    </div>

    <div class="content">
        <div class="l-box-lrg pure-u pure-u-1">
            <form action="/pilot/create" method="post" class="pure-form pure-form-aligned">
                <fieldset>

                    <div class="pure-control-group">
                        <label for="enrollment">Enrollment</label>
                        <input id="enrollment"
                               name="pilot.enrollment"
                               type="checkbox">
                    </div>

                    <div class="pure-control-group">
                        <label for="pilotID"></label>
                        <input id="pilotID"
                               name="pilot.id"
                               type="text"
                               placeholder="Pilot ID that needs to be enrolled/blocked">
                    </div>

                    <input name="flag.id" type="hidden" value="{{ .Flag.ID }}">
                    <button type="submit" class="pure-button pure-button-primary">Save</button>

                </fieldset>
            </form>
        </div>
    </div>

{{end}}